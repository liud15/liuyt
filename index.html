<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LIU-OFC — Descargador</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{--card-bg:rgba(17,24,39,0.72);} /* gray-900 semi */
    html,body{height:100%;font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}

    /* Fondo decorativo con blobs y patrón sutil */
    .hero-bg{
      position:fixed;inset:0;z-index:-10;display:block;overflow:hidden;background:linear-gradient(180deg,#071023 0%, #0b1220 50%, #081226 100%);
    }
    .blob{
      position:absolute;filter:blur(80px);opacity:0.12;transform:translateZ(0);
    }
    .blob.a{width:520px;height:520px;right:-120px;top:-80px;background:linear-gradient(135deg,#2563eb,#7c3aed);}
    .blob.b{width:420px;height:420px;left:-140px;bottom:-80px;background:linear-gradient(135deg,#06b6d4,#06b6d4);}

    /* Panel principal con sombra suave */
    .glass-card{
      background:var(--card-bg);backdrop-filter: blur(8px) saturate(120%);-webkit-backdrop-filter: blur(8px);
      border:1px solid rgba(255,255,255,0.04);
      box-shadow: 0 20px 60px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
    }

    /* Logo redondeado */
    .brand-logo{width:58px;height:58px;border-radius:12px;object-fit:cover}

    /* Loader pequeño (mantener comportamiento) */
    .loader{border:4px solid rgba(255,255,255,0.12);border-left-color:#3b82f6;border-radius:9999px;width:24px;height:24px;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Resultado grande, botón ancho */
    .result-panel{background:rgba(15,23,42,0.35);border-radius:12px;padding:18px}

    /* Footer small */
    .muted{color:rgba(255,255,255,0.42)}

    @media (min-width:1024px){
      .container-grid{display:grid;grid-template-columns:1fr 460px;gap:48px;align-items:center}
    }
  </style>
</head>
<body class="min-h-screen text-white">

  <!-- Fondo decorativo -->
  <div class="hero-bg" aria-hidden="true">
    <div class="blob a"></div>
    <div class="blob b"></div>
    <!-- patrón sutil -->
    <svg width="0" height="0" style="position:absolute">
      <defs>
        <pattern id="p" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="1" cy="1" r="1" fill="rgba(255,255,255,0.02)" /></pattern>
      </defs>
    </svg>
  </div>

  <div class="min-h-screen flex items-center justify-center p-6">
    <div class="w-full max-w-6xl">

      <div class="container-grid">
        <!-- Panel informativo / branding (izquierda en desktop) -->
        <aside class="hidden lg:block px-6 py-10 glass-card rounded-2xl">
          <div class="flex items-start gap-4">
            <!-- Logo: reemplaza 'logo.png' por tu archivo, o usa URL absoluta -->
            <img src="logo.png" alt="LIU-OFC" class="brand-logo shadow-md" onerror="this.style.display='none'">
            <div>
              <h1 class="text-4xl font-extrabold leading-tight text-blue-300">Descargador <span class="text-white">LIU‑OFC</span></h1>
              <p class="mt-2 text-sm muted">Convierte enlaces de YouTube a MP3 de forma rápida y sencilla. Pega el enlace y obtén tu archivo listo para descargar.</p>
            </div>
          </div>

          <div class="mt-8 text-sm muted">
            <p class="mb-3"><strong>Consejos:</strong></p>
            <ul class="list-disc pl-5 space-y-2">
              <li>No compartas enlaces privados.</li>
              <li>Si falla la descarga revisa bloqueo por CORS.</li>
              <li>Puedes usar el botón derecho sobre "Descargar" y elegir "Guardar enlace como...".</li>
            </ul>
          </div>

          <div class="mt-8 flex gap-3">
            <a href="#" class="inline-flex items-center gap-2 px-3 py-2 bg-white/6 rounded-md hover:bg-white/8 transition"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 5v14M19 12H5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg> Cómo funciona</a>
            <a href="#" class="inline-flex items-center gap-2 px-3 py-2 bg-white/6 rounded-md hover:bg-white/8 transition">Soporte</a>
          </div>

        </aside>

        <!-- Card principal (derecha en desktop / centro en mobile) -->
        <main class="mx-auto glass-card rounded-3xl p-8 lg:p-10">
          <div class="max-w-md mx-auto">
            <!-- Header compacto dentro de la card para mobile -->
            <div class="flex items-center justify-between mb-6">
              <div class="flex items-center gap-3">
                <img src="logo.png" alt="LIU-OFC" class="brand-logo shadow-md" onerror="this.style.display='none'">
                <div>
                  <h2 class="text-xl font-bold text-blue-300">Mi Aplicación de Descarga</h2>
                  <p class="text-xs muted">Rápido. Simple. Seguro.</p>
                </div>
              </div>
              <div class="text-xs muted">v1.0</div>
            </div>

            <!-- Input y botón -->
            <label for="url-input" class="block text-sm font-medium text-gray-300 mb-2">URL del Contenido:</label>
            <div class="space-y-4">
              <input id="url-input" type="url" placeholder="https://youtu.be/ejemplo" class="w-full p-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" aria-label="URL del contenido">

              <button id="download-btn" class="w-full inline-flex items-center justify-center gap-3 bg-gradient-to-br from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold p-3 rounded-xl shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                <div id="spinner" class="loader hidden" aria-hidden="true"></div>
                <span id="btn-text">Procesar Enlace</span>
              </button>

              <div id="error-message" class="text-red-400 text-center font-medium" role="status" aria-live="polite"></div>
            </div>

            <!-- Resultados -->
            <div id="results-container" class="mt-8 hidden">
              <h3 class="text-lg font-semibold text-gray-200 mb-3">Resultado:</h3>

              <div class="result-panel rounded-lg">
                <p class="mb-2"><strong>Título:</strong> <span id="result-title" class="text-gray-300"></span></p>
                <p class="mb-4"><strong>Formato:</strong> <span id="result-format" class="bg-green-600 text-white text-xs font-mono px-2 py-0.5 rounded-full ml-2"></span></p>

                <div class="flex gap-3">
                  <a id="result-download-link" href="#" target="_blank" rel="noopener noreferrer" class="flex-1 text-center bg-green-500 hover:bg-green-600 text-white font-bold p-3 rounded-lg transition-colors">Descargar Archivo</a>
                  <button id="copy-url" class="px-4 py-3 bg-white/6 rounded-lg text-sm muted hover:bg-white/8">Copiar enlace</button>
                </div>

                <p class="mt-3 text-xs muted">Si la descarga no inicia, haz clic derecho en "Descargar Archivo" y selecciona "Guardar enlace como..."</p>
              </div>
            </div>

            <!-- Footer pequeño dentro de la card -->
            <div class="mt-6 text-center muted text-xs">Creado por <span class="text-white">LIU‑OFC</span></div>
          </div>
        </main>

      </div>

    </div>
  </div>

  <!-- ======= Scripts: NO CAMBIAR LÓGICA ======= -->
  <!-- El siguiente script contiene las mismas funciones que estás usando: ids y nombres se mantienen para compatibilidad. -->
  <script>
    // --- Selección de Elementos del DOM ---
    const urlInput = document.getElementById('url-input');
    const downloadBtn = document.getElementById('download-btn');
    const btnText = document.getElementById('btn-text');
    const spinner = document.getElementById('spinner');

    const errorMessage = document.getElementById('error-message');
    const resultsContainer = document.getElementById('results-container');

    const resultTitle = document.getElementById('result-title');
    const resultFormat = document.getElementById('result-format');
    const resultDownloadLink = document.getElementById('result-download-link');

    // --- Manejador del Evento Click ---
    downloadBtn.addEventListener('click', handleDownload);

    async function handleDownload() {
        const url = urlInput.value;
        const apiKey = "liu_ofc"; // Tu API key

        // 1. Validación simple
        if (!url) {
            showError("Por favor, ingresa una URL válida.");
            return;
        }

        // 2. Actualizar UI para estado de carga
        setLoading(true);
        clearMessages();

        try {
            // --- SIMULACIÓN DE LLAMADA A LA API ---
            await new Promise(resolve => setTimeout(resolve, 2000));

            const simData = {
                "status": true,
                "creator": "I'm Fz ~",
                "data": {
                    "title": "SLAVA FUNK! (Simulado)",
                    "dl_url": "#",
                    "format": "mp3"
                }
            };

            if (simData.status && simData.data) {
                displayResults(simData.data);
            } else {
                showError(simData.message || "La API devolvió un error desconocido.");
            }

        } catch (error) {
            console.error("Error en fetch:", error);
            showError("No se pudo contactar al servidor. Revisa tu conexión.");
        } finally {
            setLoading(false);
        }
    }

    // --- Funciones Auxiliares de UI ---

    function setLoading(isLoading) {
        if (isLoading) {
            downloadBtn.disabled = true;
            spinner.classList.remove('hidden');
            btnText.textContent = 'Procesando...';
        } else {
            downloadBtn.disabled = false;
            spinner.classList.add('hidden');
            btnText.textContent = 'Procesar Enlace';
        }
    }

    function displayResults(data) {
        resultTitle.textContent = data.title;
        resultFormat.textContent = data.format.toUpperCase();
        resultDownloadLink.href = data.dl_url;
        resultsContainer.classList.remove('hidden');
    }

    function showError(message) {
        errorMessage.textContent = message;
    }

    function clearMessages() {
        errorMessage.textContent = '';
        resultsContainer.classList.add('hidden');
    }

    // Pequeña utilidad para copiar la URL de descarga al portapapeles
    document.getElementById('copy-url')?.addEventListener('click', async () => {
      const href = resultDownloadLink.href;
      if (!href || href === '#') return;
      try { await navigator.clipboard.writeText(href); alert('Enlace copiado al portapapeles'); } catch(e){ alert('No se pudo copiar el enlace'); }
    });

  </script>

</body>
</html>
